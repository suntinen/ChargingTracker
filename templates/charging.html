{% extends "layout.html" %}
{% block title %}
Charging Events
{% endblock %}
{% block content %}
    <h3>Add New Charging Event</h3>
    <form method="post" action="{{ url_for('add_charging') }}">
        <label for="charging_station">Charging Station:</label>
        <select id="charging_station" name="charging_station">
            <option value="">Select station</option>
            {% for station in charging_stations %}
                <option value="{{ station.id }}">{{ station.station_name }}</option>
            {% endfor %}
        </select>

        <label for="vehicle">Car:</label>
        <select id="vehicle" name="vehicle">
            <option value="">Select car</option>
            {% for vehicle in vehicles %}
                <option value="{{ vehicle.id }}">{{ vehicle.vehicle_name }}</option>
            {% endfor %}
        </select>

        <label for="start_time">Start Time:</label>
        <input type="datetime-local" id="start_time" name="start_time" required>

        <label for="end_time">End Time:</label>
        <input type="datetime-local" id="end_time" name="end_time" required>

        <label for="charged_energy">Energy Charged (kWh):</label>
        <input type="number" id="charged_energy" name="charged_energy" required>

        <label for="cost">Cost (â‚¬):</label>
        <input type="number" id="cost" name="cost" required>

        <label for="mileage">Mileage:</label>
        <input type="number" id="mileage" name="mileage" required>

        <label for="destination">Destination:</label>
        <select id="destination" name="destination">
            <option value="">Select Destination</option>
            {% for destination in destinations %}
                <option value="{{ destination.id }}">{{ destination.destination_name }}</option>
            {% endfor %}
        </select>

        <input type="submit" class="btn btn-primary" value="Add Charging Event">
    </form>

    <h3>Charging Events</h3>
    <table>
        <tr>
            <th>Charging Station</th>
            <th>Start Time</th>
            <th>End Time</th>
            <th>Energy Charged</th>
            <th>Cost</th>
            <th>Vehicle</th>
            <th>Mileage</th>
            <th>Destination</th>
            <th>Actions</th>
        </tr>
        {% for charging in chargings %}
        <tr>
            <td>{{ charging.station_name }}</td>
            <td>{{ charging.start_time }}</td>
            <td>{{ charging.end_time }}</td>
            <td>{{ charging.charged_energy }}</td>
            <td>{{ charging.cost }}</td>
            <td>{{ charging.vehicle_name }}</td>
            <td>{{ charging.mileage }}</td>
            <td>{{ charging.destination_name or 'N/A' }}</td>

            <td>
                <a href="{{ url_for('edit_charging', id=charging.id) }}">Edit</a>
                <form style="display:inline" method="post" action="{{ url_for('delete_charging', id=charging.id) }}" onsubmit="return confirm('Are you sure?');">
                    <button type="submit" class="btn btn-danger">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
{% endblock %}
